
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pulse-level descriptions of gates and measurement &#8212; OpenQASM Live Specification  documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OpenQasm 3.0 Grammar" href="../grammar/index.html" />
    <link rel="prev" title="Circuit timing" href="delays.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pulse-level-descriptions-of-gates-and-measurement">
<h1>Pulse-level descriptions of gates and measurement<a class="headerlink" href="#pulse-level-descriptions-of-gates-and-measurement" title="Permalink to this headline">¶</a></h1>
<p>To induce the quantum gates and measurements of a circuit, qubits are
manipulated with classically-controlled stimulus fields. The details of
these stimuli are typically unique per-qubit and may vary over time due
to instabilities in the underlying systems. Furthermore, there is
significant interest in applying optimal control methodologies to the
construction of these controls in order to optimize gate and circuit
performance. As a consequence, we desire to connect gate-level
instructions to the underlying microcoded
<span class="bibtex" id="id1">[wilkesBestWayDesign1989]</span> stimulus programs emitted by
the controllers to implement each operation. In OpenQASM we expose
access to this level of control with pulse-level definitions of gates
and measurement with user-selectable pulse grammar. A future document
will define a textualized representation of one such grammar, OpenPulse.
Here we restrict ourselves to defining the necessary interfaces within
OpenQASM to these pulse-level definitions of gates and measurement.</p>
<p>The entry point to such gate and measurement definitions is the <code class="docutils literal notranslate"><span class="pre">defcal</span></code> keyword
analogous to the <code class="docutils literal notranslate"><span class="pre">gate</span></code> keyword, but where the <code class="docutils literal notranslate"><span class="pre">defcal</span></code> body specifies a pulse-level
instruction sequence on <em>physical</em> qubits, e.g.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">defcal</span> <span class="nf">rz</span><span class="p">(</span><span class="n">angle</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span><span class="o">:</span><span class="n">theta</span><span class="p">)</span> <span class="o">%</span><span class="n">q</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="n">defcal</span> <span class="n">measure</span> <span class="o">%</span><span class="n">q</span> <span class="o">-&gt;</span> <span class="n">bit</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>We distinguish gate and measurement definitions by the presence of a
return value type in the latter case, analogous to the subroutine syntax
defined earlier. The reference to <em>physical</em> rather than <em>virtual</em>
qubits is critical because quantum registers are no longer
interchangeable at the pulse level. Due to varying physical qubit
properties a microcode definition of a gate on one qubit will not
perform the equivalent operation on another qubit. To meaningfully
describe gates as pulses we must bind operations to specific qubits.
QASM achieves this by prefixing qubit references with <code class="docutils literal notranslate"><span class="pre">%</span></code> to indicate
a specific qubit on the device, e.g. <code class="docutils literal notranslate"><span class="pre">%2</span></code> would refer to physical
qubit 2, while <code class="docutils literal notranslate"><span class="pre">%q</span></code> is an unbound reference to a physical qubit.</p>
<p>As a consequence of the need for specialization of operations on
particular qubits, we expect the same symbol to be defined multiple
times, e.g.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">defcal</span> <span class="n">h</span> <span class="o">%</span><span class="mi">0</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="n">defcal</span> <span class="n">h</span> <span class="o">%</span><span class="mi">1</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>and so forth. Some operations require further specialization on
parameter values, so we also allow multiple declarations on the same
physical qubits with different parameter values, e.g.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">defcal</span> <span class="nf">rx</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span> <span class="o">%</span><span class="mi">0</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="n">defcal</span> <span class="nf">rx</span><span class="p">(</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span><span class="mi">0</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Given multiple definitions of the same symbol, the compiler will match
the most specific definition found for a given operation. Thus, given,</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">defcal</span> <span class="pre">rx(angle[20]:theta)</span> <span class="pre">%q</span>&#160; <span class="pre">...</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defcal</span> <span class="pre">rx(angle[20]:theta)</span> <span class="pre">%0</span>&#160; <span class="pre">...</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defcal</span> <span class="pre">rx(pi</span> <span class="pre">/</span> <span class="pre">2)</span> <span class="pre">%0</span>&#160; <span class="pre">...</span></code></p></li>
</ol>
<p>the operation <code class="docutils literal notranslate"><span class="pre">rx(pi/2)</span> <span class="pre">%0</span></code> would match to (3), <code class="docutils literal notranslate"><span class="pre">rx(pi)</span> <span class="pre">%0</span></code> would
match (2), <code class="docutils literal notranslate"><span class="pre">rx(pi/2)</span> <span class="pre">%1</span></code> would match (1).</p>
<p>Users specify the grammar used inside <code class="docutils literal notranslate"><span class="pre">defcal</span></code> blocks with a <code class="docutils literal notranslate"><span class="pre">defcalgrammar</span> <span class="pre">&quot;name&quot;</span></code> declaration, or by
an optional grammar string in a <code class="docutils literal notranslate"><span class="pre">defcal</span></code> definition, e.g.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">defcalgrammar</span> <span class="s">&quot;openpulse&quot;</span><span class="p">;</span>
<span class="n">defcal</span> <span class="s">&quot;openpulse&quot;</span> <span class="n">measure</span> <span class="o">%</span><span class="n">q</span> <span class="o">-&gt;</span> <span class="n">bit</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>are two equivalent ways to specify that the <code class="docutils literal notranslate"><span class="pre">measure</span></code> definition uses the <code class="docutils literal notranslate"><span class="pre">&quot;openpulse&quot;</span></code> grammar.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">defcal</span></code> and <code class="docutils literal notranslate"><span class="pre">gate</span></code> communicate orthogonal information to the compiler. <code class="docutils literal notranslate"><span class="pre">gate</span></code>’s
define unitary transformation rules to the compiler. The compiler may
freely invoke such rules on operations while preserving the structure of
a circuit as a collection of <code class="docutils literal notranslate"><span class="pre">gate</span></code>’s and <code class="docutils literal notranslate"><span class="pre">subroutine</span></code>’s. The <code class="docutils literal notranslate"><span class="pre">defcal</span></code> declarations instead define
elements of a symbol lookup table. As soon as the compiler replaces a <code class="docutils literal notranslate"><span class="pre">gate</span></code>
with a <code class="docutils literal notranslate"><span class="pre">defcal</span></code> definition, we have changed the fundamental structure of the
circuit. Most of the time symbols in the <code class="docutils literal notranslate"><span class="pre">defcal</span></code> table will also have
corresponding <code class="docutils literal notranslate"><span class="pre">gate</span></code> definitions. However, if a user provides a <code class="docutils literal notranslate"><span class="pre">defcal</span></code> for a symbol
without a corresponding <code class="docutils literal notranslate"><span class="pre">gate</span></code>, then we treat such operations like the <code class="docutils literal notranslate"><span class="pre">opaque</span></code> gates
of prior versions of OpenQASM.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">OpenQASM Live Specification</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="comments.html">Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="comments.html#version-string">Version string</a></li>
<li class="toctree-l2"><a class="reference internal" href="comments.html#included-files">Included files</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types and Casting</a></li>
<li class="toctree-l2"><a class="reference internal" href="gates.html">Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="insts.html">Built-in quantum instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="classical.html">Classical instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="subroutines.html">Subroutines</a></li>
<li class="toctree-l2"><a class="reference internal" href="directives.html">Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="delays.html">Circuit timing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Pulse-level descriptions of gates and measurement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../grammar/index.html">OpenQasm 3.0 Grammar</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Language</a><ul>
      <li>Previous: <a href="delays.html" title="previous chapter">Circuit timing</a></li>
      <li>Next: <a href="../grammar/index.html" title="next chapter">OpenQasm 3.0 Grammar</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017-2020, Andrew W. Cross, Lev S. Bishop, John A. Smolin, Jay M. Gambetta.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/language/pulses.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>